var app=angular.module("admin",["ngRoute","ngFileUpload"]);app.config(["$routeProvider",function(e){e.when("/good",{controller:"Good",templateUrl:"pages/admin_good.html"}).when("/dic",{controller:"Dic",templateUrl:"pages/admin_dic.html"}).when("/users",{controller:"UserManager",templateUrl:"user_manager.html"}).when("permission",{controller:"PermissionManager",templateUrl:"admin_permission.html"}).otherwise({redirectTo:"/good"})}]);var app=angular.module("mobile",["ngRoute"]);app.config(["$routeProvider",function(e){e.when("/home",{controller:"Home",templateUrl:"pages/home.html"}).otherwise({redirectTo:"/home"})}]);var app=angular.module("app",["ngRoute"]);app.config(["$routeProvider",function(e){e.when("/order/index",{controller:"OrderIndex",templateUrl:"pages/orders_list.html"}).when("/order/create",{controller:"OrderCreate",templateUrl:"pages/orders_create.html"}).when("/order/detail/:_id",{controller:"OrderDetail",templateUrl:"pages/orders_detail.html"}).otherwise({redirectTo:"/order/index"})}]);var app=angular.module("admin");app.controller("Dic",["$scope","$http","$route",function(e,t,o){document.title="Dictionary Management",t.get("/dics").success(function(t){e.dics=t}),t.get("/dicTypes").success(function(t){e.dicTypes=t}),e.getDic=function(o){t.get("/dics/"+o).success(function(t){t.code||(e.dicEdit=t)})},e.createDic=function(e){t.post("/dics",e).success(function(e){e.code||o.reload()})},e.deleteDic=function(e){t["delete"]("/dics/"+e).success(function(e){0==e.code&&o.reload()})}}]);var app=angular.module("admin");app.controller("Good",["$scope","$http","$route","Upload","$timeout",function(e,t,o,r,n){document.title="Goods Management",e.isUpdate=!1,e.buttonName="新建商品",e.good={name:"芒果",desc:"描述",category:"Nut",pics:[],provenance:"上海",shelfLife:1,storage:"阴凉",price:10,sales:0,balance:120},t.get("/goods").success(function(t){e.goods=t}),t.get("/goodCategories").success(function(t){e.goodCategories=t}),e.editGood=function(o){t.get("/goods/"+o).success(function(t){t.code||(e.good=t,e.isUpdate=!0,e.buttonName="编辑商品")})},e.saveGood=function(r){e.isUpdate?t.put("/goods/"+r._id,r).success(function(e){0==e.code&&o.reload()}):t.post("/goods",r).success(function(e){e.code||o.reload()})},e.deleteGood=function(e){t["delete"]("/goods/"+e).success(function(e){0==e.code&&o.reload()})},e.uploadFiles=function(t){e.files=t,angular.forEach(t,function(t){t.upload=r.upload({url:"/pics",data:{file:t}}),t.upload.then(function(t){n(function(){e.good.pics.push(t.data),console.log()})},function(t){t.status>0&&(e.errorMsg=t.status+": "+t.data)},function(e){t.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})}}]);var app=angular.module("admin"),title="Permission Management";app.controller("PermissionManager",["$scope","$http","$route",function(e,t,o){document.title=title,e.Permission={permissionType:"test",name:"",featureHash:"test",description:"test"},e.createPermission=function(e){t.post("/permissions",e).success(function(e){e.code||o.reload()})}}]);var app=angular.module("admin"),title="User Management";app.controller("UserManager",["$scope","$http","$route",function(e,t,o){document.title=title,t.get("/roles").success(function(t){e.Roles=t}),e.User={userName:""},e.createUser=function(e){}}]),app.controller("userIndex",["$scope","$http","$route",function(e,t,o){t.get("/users").success(function(t){e.users=t})}]);var app=angular.module("mobile");app.controller("Home",["$scope","$http","$route",function(e,t,o){document.title="Home"}]);var app=angular.module("app");app.controller("OrderIndex",["$scope","$http","$route",function(e,t,o){document.title="Order List",t.get("/orders").success(function(t){e.orders=t}),e.deleteOrder=function(e){t["delete"]("/orders/"+e).success(function(e){o.reload()})}}]);var fruits=[{fruit_name:"Apple",unit_price:1.2,fruit_quantity:0,selectd:!1},{fruit_name:"Banana",unit_price:2.3,fruit_quantity:0,selectd:!1},{fruit_name:"Pitaya",unit_price:3.4,fruit_quantity:0,selectd:!1},{fruit_name:"Mango",unit_price:4.5,fruit_quantity:0,selectd:!1}];app.controller("OrderCreate",["$scope","$http","$location",function(e,t,o){document.title="Order Create",e.fruits=fruits,e.order={customer:"leo",amount:0,delivery_date:new Date,fruits:[]},e.calcTotalAmount=function(){var t=0;for(var o in e.fruits){var r=e.fruits[o];r.selectd&&(t+=r.unit_price*r.fruit_quantity)}e.order.amount=t},e.createOrder=function(r){for(var n in e.fruits){var i=e.fruits[n];i.selectd&&r.fruits.push({fruit_name:i.fruit_name,fruit_quantity:i.fruit_quantity})}t.post("/orders",r).success(function(e){e.code||o.path("/order/detail/"+e)})}}]),app.controller("OrderDetail",["$scope","$http","$routeParams",function(e,t,o){document.title="Order Detail";var r=o._id;t.get("/orders/"+r).success(function(t){t.code||(e.order=t)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL2NsaWVudC9yb3V0ZXMuanMiLCJtb2JpbGUvY2xpZW50L3JvdXRlcy5qcyIsIm9yZGVycy9jbGllbnQvcm91dGVzLmpzIiwiYWRtaW4vY2xpZW50L2NvbnRyb2xsZXJzL2RpYy5qcyIsImFkbWluL2NsaWVudC9jb250cm9sbGVycy9nb29kLmpzIiwiYWRtaW4vY2xpZW50L2NvbnRyb2xsZXJzL3Blcm1pc3Npb24uanMiLCJhZG1pbi9jbGllbnQvY29udHJvbGxlcnMvdXNlcm1hbmFnZXIuanMiLCJtb2JpbGUvY2xpZW50L2NvbnRyb2xsZXJzL2hvbWUuanMiLCJvcmRlcnMvY2xpZW50L2NvbnRyb2xsZXJzL29yZGVyLmpzIl0sIm5hbWVzIjpbImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJjb250cm9sbGVyIiwidGVtcGxhdGVVcmwiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiJHNjb3BlIiwiJGh0dHAiLCIkcm91dGUiLCJkb2N1bWVudCIsInRpdGxlIiwiZ2V0Iiwic3VjY2VzcyIsInJlc3VsdCIsImRpY3MiLCJkaWNUeXBlcyIsImdldERpYyIsIl9pZCIsImNvZGUiLCJkaWNFZGl0IiwiY3JlYXRlRGljIiwiZGljIiwicG9zdCIsInJlbG9hZCIsImRlbGV0ZURpYyIsIlVwbG9hZCIsIiR0aW1lb3V0IiwiaXNVcGRhdGUiLCJidXR0b25OYW1lIiwiZ29vZCIsIm5hbWUiLCJkZXNjIiwiY2F0ZWdvcnkiLCJwaWNzIiwicHJvdmVuYW5jZSIsInNoZWxmTGlmZSIsInN0b3JhZ2UiLCJwcmljZSIsInNhbGVzIiwiYmFsYW5jZSIsImdvb2RzIiwiZ29vZENhdGVnb3JpZXMiLCJlZGl0R29vZCIsInNhdmVHb29kIiwicHV0IiwiZGVsZXRlR29vZCIsInVwbG9hZEZpbGVzIiwiZmlsZXMiLCJmb3JFYWNoIiwiZmlsZSIsInVwbG9hZCIsInVybCIsImRhdGEiLCJ0aGVuIiwicmVzcG9uc2UiLCJwdXNoIiwiY29uc29sZSIsImxvZyIsInN0YXR1cyIsImVycm9yTXNnIiwiZXZ0IiwicHJvZ3Jlc3MiLCJNYXRoIiwibWluIiwicGFyc2VJbnQiLCJsb2FkZWQiLCJ0b3RhbCIsIlBlcm1pc3Npb24iLCJwZXJtaXNzaW9uVHlwZSIsImZlYXR1cmVIYXNoIiwiZGVzY3JpcHRpb24iLCJjcmVhdGVQZXJtaXNzaW9uIiwicGVybWlzc2lvbiIsIlJvbGVzIiwiVXNlciIsInVzZXJOYW1lIiwiY3JlYXRlVXNlciIsInVzZXJzIiwib3JkZXJzIiwiZGVsZXRlT3JkZXIiLCJmcnVpdHMiLCJmcnVpdF9uYW1lIiwidW5pdF9wcmljZSIsImZydWl0X3F1YW50aXR5Iiwic2VsZWN0ZCIsIiRsb2NhdGlvbiIsIm9yZGVyIiwiY3VzdG9tZXIiLCJhbW91bnQiLCJkZWxpdmVyeV9kYXRlIiwiRGF0ZSIsImNhbGNUb3RhbEFtb3VudCIsImkiLCJmcnVpdCIsImNyZWF0ZU9yZGVyIiwicGF0aCIsIiRyb3V0ZVBhcmFtcyJdLCJtYXBwaW5ncyI6IkFBR0EsR0FBSUEsS0FBTUMsUUFBUUMsT0FBTyxTQUFVLFVBQVcsZ0JBRTlDRixLQUFJRyxRQUFBLGlCQUFPLFNBQVVDLEdBQ2pCQSxFQUNLQyxLQUFLLFNBQ0ZDLFdBQVksT0FDWkMsWUFBYSwwQkFFaEJGLEtBQUssUUFDRkMsV0FBWSxNQUNaQyxZQUFhLHlCQUVqQkYsS0FBSyxVQUNEQyxXQUFZLGNBQ1pDLFlBQWEsc0JBRWpCRixLQUFLLGNBQ0RDLFdBQVksb0JBQ1pDLFlBQWEsMEJBRWpCQyxXQUNJQyxXQUFZLFlDckJ4QixJQUFJVCxLQUFNQyxRQUFRQyxPQUFPLFVBQVcsV0FFcENGLEtBQUlHLFFBQUEsaUJBQU8sU0FBVUMsR0FDakJBLEVBQ0tDLEtBQUssU0FDRkMsV0FBWSxPQUNaQyxZQUFhLG9CQUVoQkMsV0FDR0MsV0FBWSxZQ1R4QixJQUFJVCxLQUFNQyxRQUFRQyxPQUFPLE9BQVEsV0FFakNGLEtBQUlHLFFBQUEsaUJBQU8sU0FBVUMsR0FDakJBLEVBQ0tD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U0FBQSxRQUFBLGVBQWUsU0FBVUksRUFBUUMsRUFBT3lGLEdBQ25EdkYsU0FBU0MsTUFBUSxjQUVqQixJQUFJTyxHQUFNK0UsRUFBYS9FLEdBQ3ZCVixHQUFNSSxJQUFJLFdBQWFNLEdBQUtMLFFBQVEsU0FBVUMsR0FDckNBLEVBQU9LLE9BQ1JaLEVBQU9nRixNQUFRekUiLCJmaWxlIjoibmcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSB4el9saXUgb24gMjAxNi8zLzkuXHJcbiAqL1xyXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FkbWluJywgWyduZ1JvdXRlJywgJ25nRmlsZVVwbG9hZCddKTtcclxuXHJcbmFwcC5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyKSB7XHJcbiAgICAkcm91dGVQcm92aWRlclxyXG4gICAgICAgIC53aGVuKCcvZ29vZCcsIHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0dvb2QnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhZ2VzL2FkbWluX2dvb2QuaHRtbCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC53aGVuKCcvZGljJywge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnRGljJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYWdlcy9hZG1pbl9kaWMuaHRtbCdcclxuICAgICAgICB9KS5cclxuICAgICAgICB3aGVuKCcvdXNlcnMnLCB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyTWFuYWdlcicsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndXNlcl9tYW5hZ2VyLmh0bWwnXHJcbiAgICAgICAgfSkuXHJcbiAgICAgICAgd2hlbigncGVybWlzc2lvbicsIHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Blcm1pc3Npb25NYW5hZ2VyJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhZG1pbl9wZXJtaXNzaW9uLmh0bWwnXHJcbiAgICAgICAgfSkuXHJcbiAgICAgICAgb3RoZXJ3aXNlKHtcclxuICAgICAgICAgICAgcmVkaXJlY3RUbzogJy9nb29kJ1xyXG4gICAgICAgIH0pO1xyXG59KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSB4el9saXUgb24gMjAxNi8zLzkuXHJcbiAqL1xyXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ21vYmlsZScsIFsnbmdSb3V0ZSddKTtcclxuXHJcbmFwcC5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyKSB7XHJcbiAgICAkcm91dGVQcm92aWRlclxyXG4gICAgICAgIC53aGVuKCcvaG9tZScsIHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0hvbWUnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhZ2VzL2hvbWUuaHRtbCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5vdGhlcndpc2Uoe1xyXG4gICAgICAgICAgICByZWRpcmVjdFRvOiAnL2hvbWUnXHJcbiAgICAgICAgfSk7XHJcbn0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHh6X2xpdSBvbiAyMDE2LzMvOS5cclxuICovXHJcbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyduZ1JvdXRlJ10pO1xyXG5cclxuYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpIHtcclxuICAgICRyb3V0ZVByb3ZpZGVyXHJcbiAgICAgICAgLndoZW4oJy9vcmRlci9pbmRleCcsIHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ09yZGVySW5kZXgnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhZ2VzL29yZGVyc19saXN0Lmh0bWwnXHJcbiAgICAgICAgfSlcclxuICAgICAgICAud2hlbignL29yZGVyL2NyZWF0ZScsIHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ09yZGVyQ3JlYXRlJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYWdlcy9vcmRlcnNfY3JlYXRlLmh0bWwnXHJcbiAgICAgICAgfSlcclxuICAgICAgICAud2hlbignL29yZGVyL2RldGFpbC86X2lkJywge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnT3JkZXJEZXRhaWwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhZ2VzL29yZGVyc19kZXRhaWwuaHRtbCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5vdGhlcndpc2Uoe1xyXG4gICAgICAgICAgICByZWRpcmVjdFRvOiAnL29yZGVyL2luZGV4J1xyXG4gICAgICAgIH0pO1xyXG59KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSB4el9saXUgb24gMjAxNi8zLzkuXHJcbiAqL1xyXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FkbWluJyk7XHJcblxyXG5hcHAuY29udHJvbGxlcignRGljJywgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsICRyb3V0ZSkge1xyXG4gICAgZG9jdW1lbnQudGl0bGUgPSAnRGljdGlvbmFyeSBNYW5hZ2VtZW50JztcclxuXHJcbiAgICAkaHR0cC5nZXQoJy9kaWNzJykuc3VjY2VzcyhmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgJHNjb3BlLmRpY3MgPSByZXN1bHQ7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkaHR0cC5nZXQoJy9kaWNUeXBlcycpLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICRzY29wZS5kaWNUeXBlcyA9IHJlc3VsdDtcclxuICAgIH0pO1xyXG5cclxuICAgICRzY29wZS5nZXREaWMgPSBmdW5jdGlvbiAoX2lkKSB7XHJcbiAgICAgICAgJGh0dHAuZ2V0KCcvZGljcy8nICsgX2lkKS5zdWNjZXNzKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgaWYgKCFyZXN1bHQuY29kZSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRpY0VkaXQgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmNyZWF0ZURpYyA9IGZ1bmN0aW9uIChkaWMpIHtcclxuICAgICAgICAkaHR0cC5wb3N0KCcvZGljcycsIGRpYykuc3VjY2VzcyhmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmICghcmVzdWx0LmNvZGUpIHtcclxuICAgICAgICAgICAgICAgICRyb3V0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZGVsZXRlRGljID0gZnVuY3Rpb24gKF9pZCkge1xyXG4gICAgICAgICRodHRwLmRlbGV0ZSgnL2RpY3MvJyArIF9pZCkuc3VjY2VzcyhmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAkcm91dGUucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHh6X2xpdSBvbiAyMDE2LzMvOS5cclxuICovXHJcbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYWRtaW4nKTtcclxuXHJcbmFwcC5jb250cm9sbGVyKCdHb29kJywgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsICRyb3V0ZSwgVXBsb2FkLCAkdGltZW91dCkge1xyXG4gICAgZG9jdW1lbnQudGl0bGUgPSAnR29vZHMgTWFuYWdlbWVudCc7XHJcbiAgICAkc2NvcGUuaXNVcGRhdGUgPSBmYWxzZTtcclxuICAgICRzY29wZS5idXR0b25OYW1lID0gJ+aWsOW7uuWVhuWTgSc7XHJcblxyXG4gICAgLy/mtYvor5XnlKjmlbDmja5cclxuICAgICRzY29wZS5nb29kID0ge1xyXG4gICAgICAgIG5hbWU6ICfoipLmnpwnLFxyXG4gICAgICAgIGRlc2M6ICfmj4/ov7AnLFxyXG4gICAgICAgIGNhdGVnb3J5OiAnTnV0JyxcclxuICAgICAgICBwaWNzOiBbXSxcclxuICAgICAgICBwcm92ZW5hbmNlOiAn5LiK5rW3JyxcclxuICAgICAgICBzaGVsZkxpZmU6IDEsXHJcbiAgICAgICAgc3RvcmFnZTogJ+mYtOWHiScsXHJcbiAgICAgICAgcHJpY2U6IDEwLFxyXG4gICAgICAgIHNhbGVzOiAwLFxyXG4gICAgICAgIGJhbGFuY2U6IDEyMFxyXG4gICAgfTtcclxuXHJcbiAgICAkaHR0cC5nZXQoJy9nb29kcycpLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICRzY29wZS5nb29kcyA9IHJlc3VsdDtcclxuICAgIH0pO1xyXG5cclxuICAgICRodHRwLmdldCgnL2dvb2RDYXRlZ29yaWVzJykuc3VjY2VzcyhmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgJHNjb3BlLmdvb2RDYXRlZ29yaWVzID0gcmVzdWx0O1xyXG4gICAgfSk7XHJcblxyXG4gICAgJHNjb3BlLmVkaXRHb29kID0gZnVuY3Rpb24gKF9pZCkge1xyXG4gICAgICAgICRodHRwLmdldCgnL2dvb2RzLycgKyBfaWQpLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICBpZiAoIXJlc3VsdC5jb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZ29vZCA9IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5pc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYnV0dG9uTmFtZSA9ICfnvJbovpHllYblk4EnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zYXZlR29vZCA9IGZ1bmN0aW9uIChnb29kKSB7XHJcbiAgICAgICAgaWYgKCEkc2NvcGUuaXNVcGRhdGUpIHtcclxuICAgICAgICAgICAgJGh0dHAucG9zdCgnL2dvb2RzJywgZ29vZCkuc3VjY2VzcyhmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5jb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICRodHRwLnB1dCgnL2dvb2RzLycgKyBnb29kLl9pZCwgZ29vZCkuc3VjY2VzcyhmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRyb3V0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZGVsZXRlR29vZCA9IGZ1bmN0aW9uIChfaWQpIHtcclxuICAgICAgICAkaHR0cC5kZWxldGUoJy9nb29kcy8nICsgX2lkKS5zdWNjZXNzKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5jb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICRyb3V0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUudXBsb2FkRmlsZXMgPSBmdW5jdGlvbiAoZmlsZXMpIHtcclxuICAgICAgICAkc2NvcGUuZmlsZXMgPSBmaWxlcztcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goZmlsZXMsIGZ1bmN0aW9uIChmaWxlKSB7XHJcbiAgICAgICAgICAgIGZpbGUudXBsb2FkID0gVXBsb2FkLnVwbG9hZCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvcGljcycsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7ZmlsZTogZmlsZX1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBmaWxlLnVwbG9hZC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5nb29kLnBpY3MucHVzaChyZXNwb25zZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yTXNnID0gcmVzcG9uc2Uuc3RhdHVzICsgJzogJyArIHJlc3BvbnNlLmRhdGE7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgICAgIGZpbGUucHJvZ3Jlc3MgPSBNYXRoLm1pbigxMDAsIHBhcnNlSW50KDEwMC4wICpcclxuICAgICAgICAgICAgICAgICAgICBldnQubG9hZGVkIC8gZXZ0LnRvdGFsKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTsiLCJcclxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhZG1pbicpO1xyXG52YXIgdGl0bGUgPSAnUGVybWlzc2lvbiBNYW5hZ2VtZW50JztcclxuXHJcbmFwcC5jb250cm9sbGVyKCdQZXJtaXNzaW9uTWFuYWdlcicsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCAkcm91dGUpIHtcclxuICAgIGRvY3VtZW50LnRpdGxlID0gdGl0bGU7XHJcblxyXG4gICAgLyokaHR0cC5nZXQoJy9yb2xlcycpLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3VsdCl7XHJcbiAgICAgICAgJHNjb3BlLlJvbGVzID0gcmVzdWx0O1xyXG4gICAgfSk7Ki9cclxuXHJcbiAgICAkc2NvcGUuUGVybWlzc2lvbiA9IHtcclxuICAgICAgICBwZXJtaXNzaW9uVHlwZTogJ3Rlc3QnLFxyXG4gICAgICAgIG5hbWU6ICcnLFxyXG4gICAgICAgIGZlYXR1cmVIYXNoOiAndGVzdCcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICd0ZXN0J1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuY3JlYXRlUGVybWlzc2lvbiA9IGZ1bmN0aW9uIChwZXJtaXNzaW9uKSB7XHJcblxyXG4gICAgICAgICRodHRwLnBvc3QoJy9wZXJtaXNzaW9ucycsIHBlcm1pc3Npb24pLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICBpZiAoIXJlc3VsdC5jb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAkcm91dGUucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEplc3NlIFFpbiBvbiAzLzE5LzIwMTYuXHJcbiAqL1xyXG5cclxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhZG1pbicpO1xyXG52YXIgdGl0bGUgPSAnVXNlciBNYW5hZ2VtZW50JztcclxuXHJcbmFwcC5jb250cm9sbGVyKCdVc2VyTWFuYWdlcicsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCAkcm91dGUpIHtcclxuICAgIGRvY3VtZW50LnRpdGxlID0gdGl0bGU7XHJcblxyXG4gICAgJGh0dHAuZ2V0KCcvcm9sZXMnKS5zdWNjZXNzKGZ1bmN0aW9uIChyZXN1bHQpe1xyXG4gICAgICAgICRzY29wZS5Sb2xlcyA9IHJlc3VsdDtcclxuICAgIH0pO1xyXG5cclxuICAgICRzY29wZS5Vc2VyID0ge1xyXG4gICAgICAgIHVzZXJOYW1lOiAnJ1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuY3JlYXRlVXNlciA9IGZ1bmN0aW9uIChVc2VyKSB7XHJcblxyXG4gICAgICAgIC8qJGh0dHAucG9zdCgnL3VzZXJzJywgdXNlcikuc3VjY2VzcyhmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmICghcmVzdWx0LmNvZGUpIHtcclxuICAgICAgICAgICAgICAgICRyb3V0ZS5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pOyovXHJcbiAgICB9O1xyXG59KTtcclxuXHJcbmFwcC5jb250cm9sbGVyKCd1c2VySW5kZXgnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkcm91dGUpe1xyXG5cclxuICAgICRodHRwLmdldCgnL3VzZXJzJykuc3VjY2VzcyhmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgJHNjb3BlLnVzZXJzID0gcmVzdWx0O1xyXG4gICAgfSk7XHJcbn0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHh6X2xpdSBvbiAyMDE2LzMvOS5cclxuICovXHJcbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbW9iaWxlJyk7XHJcblxyXG5hcHAuY29udHJvbGxlcignSG9tZScsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCAkcm91dGUpIHtcclxuICAgIGRvY3VtZW50LnRpdGxlID0gJ0hvbWUnO1xyXG59KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSB4el9saXUgb24gMjAxNi8zLzkuXHJcbiAqL1xyXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuYXBwLmNvbnRyb2xsZXIoJ09yZGVySW5kZXgnLCBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgJHJvdXRlKSB7XHJcbiAgICBkb2N1bWVudC50aXRsZSA9ICdPcmRlciBMaXN0JztcclxuXHJcbiAgICAkaHR0cC5nZXQoJy9vcmRlcnMnKS5zdWNjZXNzKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAkc2NvcGUub3JkZXJzID0gcmVzdWx0O1xyXG4gICAgfSk7XHJcblxyXG4gICAgJHNjb3BlLmRlbGV0ZU9yZGVyID0gZnVuY3Rpb24gKF9pZCkge1xyXG4gICAgICAgICRodHRwLmRlbGV0ZSgnL29yZGVycy8nICsgX2lkKS5zdWNjZXNzKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufSk7XHJcblxyXG52YXIgZnJ1aXRzID0gW1xyXG4gICAge1xyXG4gICAgICAgIGZydWl0X25hbWU6ICdBcHBsZScsXHJcbiAgICAgICAgdW5pdF9wcmljZTogMS4yLFxyXG4gICAgICAgIGZydWl0X3F1YW50aXR5OiAwLFxyXG4gICAgICAgIHNlbGVjdGQ6IGZhbHNlXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGZydWl0X25hbWU6ICdCYW5hbmEnLFxyXG4gICAgICAgIHVuaXRfcHJpY2U6IDIuMyxcclxuICAgICAgICBmcnVpdF9xdWFudGl0eTogMCxcclxuICAgICAgICBzZWxlY3RkOiBmYWxzZVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBmcnVpdF9uYW1lOiAnUGl0YXlhJyxcclxuICAgICAgICB1bml0X3ByaWNlOiAzLjQsXHJcbiAgICAgICAgZnJ1aXRfcXVhbnRpdHk6IDAsXHJcbiAgICAgICAgc2VsZWN0ZDogZmFsc2VcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgZnJ1aXRfbmFtZTogJ01hbmdvJyxcclxuICAgICAgICB1bml0X3ByaWNlOiA0LjUsXHJcbiAgICAgICAgZnJ1aXRfcXVhbnRpdHk6IDAsXHJcbiAgICAgICAgc2VsZWN0ZDogZmFsc2VcclxuICAgIH1dO1xyXG5cclxuYXBwLmNvbnRyb2xsZXIoJ09yZGVyQ3JlYXRlJywgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsICRsb2NhdGlvbikge1xyXG4gICAgZG9jdW1lbnQudGl0bGUgPSAnT3JkZXIgQ3JlYXRlJztcclxuXHJcbiAgICAkc2NvcGUuZnJ1aXRzID0gZnJ1aXRzO1xyXG5cclxuICAgICRzY29wZS5vcmRlciA9IHtcclxuICAgICAgICBjdXN0b21lcjogJ2xlbycsXHJcbiAgICAgICAgYW1vdW50OiAwLFxyXG4gICAgICAgIGRlbGl2ZXJ5X2RhdGU6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgZnJ1aXRzOiBbXVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuY2FsY1RvdGFsQW1vdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0b3RhbCA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgaSBpbiAkc2NvcGUuZnJ1aXRzKSB7XHJcbiAgICAgICAgICAgIHZhciBmcnVpdCA9ICRzY29wZS5mcnVpdHNbaV07XHJcbiAgICAgICAgICAgIGlmIChmcnVpdC5zZWxlY3RkKSB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbCArPSBmcnVpdC51bml0X3ByaWNlICogZnJ1aXQuZnJ1aXRfcXVhbnRpdHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgJHNjb3BlLm9yZGVyLmFtb3VudCA9IHRvdGFsO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuY3JlYXRlT3JkZXIgPSBmdW5jdGlvbiAob3JkZXIpIHtcclxuICAgICAgICBmb3IgKHZhciBpIGluICRzY29wZS5mcnVpdHMpIHtcclxuICAgICAgICAgICAgdmFyIGZydWl0ID0gJHNjb3BlLmZydWl0c1tpXTtcclxuICAgICAgICAgICAgaWYgKGZydWl0LnNlbGVjdGQpIHtcclxuICAgICAgICAgICAgICAgIG9yZGVyLmZydWl0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBmcnVpdF9uYW1lOiBmcnVpdC5mcnVpdF9uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGZydWl0X3F1YW50aXR5OiBmcnVpdC5mcnVpdF9xdWFudGl0eVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRodHRwLnBvc3QoJy9vcmRlcnMnLCBvcmRlcikuc3VjY2VzcyhmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmICghcmVzdWx0LmNvZGUpIHtcclxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvb3JkZXIvZGV0YWlsLycgKyByZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59KTtcclxuXHJcbmFwcC5jb250cm9sbGVyKCdPcmRlckRldGFpbCcsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCAkcm91dGVQYXJhbXMpIHtcclxuICAgIGRvY3VtZW50LnRpdGxlID0gJ09yZGVyIERldGFpbCc7XHJcblxyXG4gICAgdmFyIF9pZCA9ICRyb3V0ZVBhcmFtcy5faWQ7XHJcbiAgICAkaHR0cC5nZXQoJy9vcmRlcnMvJyArIF9pZCkuc3VjY2VzcyhmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgaWYgKCFyZXN1bHQuY29kZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUub3JkZXIgPSByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
